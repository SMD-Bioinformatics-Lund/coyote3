{
  "_id": "DNA-Assay-Config",
  "schema_name": "DNA-Assay-Config",
  "description": "Default schema for all DNA-based assay configurations",
  "schema_type": "assay_config",
  "schema_category": "DNA",
  "version": 1,
  "is_active": true,
  "sections": {
    "meta": ["assay_name", "assay_group", "config_format", "panel_name", "panel_technology", "version", "created_by", "created_on", "updated_by", "updated_on", "is_active"],
    "frequency": ["min_freq", "max_freq", "popfreq"],
    "coverage": ["warn_cov", "error_cov", "min_reads"],
    "cnv": ["min_cnv_size", "max_cnv_size", "min_cnv_ratio", "max_cnv_ratio"],
    "vep": ["vep_consequences"],
    "lists": ["genelists", "cnveffects", "fusionlists", "fusioneffects", "fusion_callers"],
    "flags": ["DNA"],
    "advanced_json": ["verification_samples", "query"],
    "reporting": ["REPORT"]
  },
  "fields": {
    "max_freq": { "type": "float", "default": 0.05, "label": "Max Allele Frequency", "placeholder": "e.g. 0.05"},
    "min_freq": { "type": "float", "default": 0.01, "label": "Min Allele Frequency", "required": true, "placeholder": "e.g. 0.01"},
    "popfreq": { "type": "float", "default": 0.01, "label": "Population Frequency", "required": true, "placeholder": "e.g. 0.01"},
    "min_reads": { "type": "int", "default": 5, "label": "Min Total Reads", "required": true, "placeholder": "e.g. 5"},
    "min_cnv_size": { "type": "int", "default": 1000, "label": "Min CNV Size", "required": true, "placeholder": "e.g. 1000"},
    "max_cnv_size": { "type": "int", "default": 50000000, "label": "Max CNV Size", "required": true, "placeholder": "e.g. 50000000"},
    "min_cnv_ratio": { "type": "float", "default": 0.3, "label": "Min CNV Ratio", "required": true, "placeholder": "e.g. 0.3"},
    "max_cnv_ratio": { "type": "float", "default": -0.3, "label": "Max CNV Ratio", "required": true, "placeholder": "e.g. -0.3"},
    "warn_cov": { "type": "int", "default": 20, "label": "Coverage Warning Threshold", "required": true, "placeholder": "e.g. 20"},
    "error_cov": { "type": "int", "default": 10, "label": "Coverage Error Threshold", "required": true, "placeholder": "e.g. 10"},
    "panel_name": { "type": "string", "default": "", "label": "Panel Name", "required": true, "placeholder": "e.g. GMS-myeloid v1.0" },
    "panel_technology": { "type": "string", "default": "", "label": "Panel Technology", "placeholder": "e.g. Illumina" },
    "assay_name": { "type": "string", "default": "", "label": "Assay Name", "required": true, "placeholder": "e.g. myeloid_GMSv1" },
    "assay_group": { "type": "string", "default": "", "label": "Assay Group", "required": true, "placeholder": "e.g. myeloid | lymphoid | solid | tumwgs | gmsonco" },
    "config_format": { "type": "string", "default": "DNA", "label": "Config Format", "required": true, "placeholder": "e.g. DNA | RNA" },
    "version": { "type": "int", "default": 1, "label": "Version", "required": true, "placeholder": "e.g. 1" },
    "created_by": { "type": "string", "default": "", "label": "Created By", "required": true },
    "updated_by": { "type": "string", "default": "", "label": "Updated By" },
    "created_on": { "type": "datetime", "default": "", "label": "Created On", "required": true },
    "updated_on": { "type": "datetime", "default": "", "label": "Updated On" },
    "is_active": { "type": "bool", "default": true, "label": "Is Active", "required": true },
    "vep_consequences": {
      "type": "list",
      "default": ["splicing", "stop_gained", "frameshift", "stop_lost", "start_lost", "inframe_indel", "missense", "other_coding"],
      "label": "VEP Consequences",
      "required": true
    },
    "genelists": { "type": "list", "default": [], "label": "Gene Lists", "required": true, "placeholder": "e.g. [solid_560, lung]" },
    "cnveffects": { "type": "list", "default": ["gain", "loss"], "label": "CNV Effect", "required": true },
    "fusionlists": { "type": "list", "default": [], "label": "Fusion Lists", "placeholder": "e.g. [solid_560, lung]" },
    "fusioneffects": { "type": "list", "default": [], "label": "Fusion Effects", "placeholder": "e.g. [missense,]" },
    "fusion_callers": { "type": "list", "default": [], "label": "Fusion Callers", "placeholder": "e.g. [STAR, FusionCatcher]" },
    "DNA": {
      "type": "subschema",
      "schema": "DNA",
      "label": "DNA Flags",
      "required": true
    },
    "REPORT": {
      "type": "subschema",
      "schema": "REPORT",
      "label": "Reporting",
      "required": true
    },
    "verification_samples": { "type": "json", "default": {}, "label": "Verification Samples" },
    "query": { "type": "json", "default": {}, "label": "Query" }
  },
  "subschemas": {
    "DNA": {
      "type": "dict",
      "fields": {
        "SNV": { "type": "bool", "default": true, "label": "SNV", "required": true },
        "CNV": { "type": "bool", "default": false, "label": "CNV", "required": true },
        "FUSION": { "type": "bool", "default": false, "label": "Fusion", "required": true },
        "BIOMARKER": { "type": "bool", "default": false, "label": "Biomarker", "required": true },
        "PGX": { "type": "bool", "default": false, "label": "Pharmacogenomics", "required": true },
        "TMB": { "type": "bool", "default": false, "label": "Tumor Mutational Burden", "required": true },
        "TRANSLOCATION": { "type": "bool", "default": false, "label": "Translocation", "required": true },
        "METHYLATION": { "type": "bool", "default": false, "label": "Methylation" },
        "QC": { "type": "bool", "default": false, "label": "Quality Control" },
        "GERMLINE": { "type": "bool", "default": false, "label": "Germline" }
      }
    },
    "REPORT": {
      "type": "dict",
      "fields": {
        "analysis_method": { "type": "string", "default": "", "label": "Analysis Method", "required": true, "placeholder": "e.g. NGS-/MPS-analys med panelen GMS-myeloid v1.0 (191 gener)" },
        "header": { "type": "string", "default": "", "label": "Report Header", "required": true, "placeholder": "e.g. Analysrapport, myeloisk genpanel (NGS)" },
        "plots_path": { "type": "string", "default": "", "label": "Report Plots Path", "required": true, "placeholder": "e.g. /access/myeloid38/plots" },
        "analysis_desc": { "type": "string", "default": "", "label": "Report Analysis Description", "required": true, "placeholder": "e.g. DNA har extraherats från insänt prov (vanligtvis färskt benmärgsprov, blodprov samt odlad hudbiopsi) och analyserats  med massiv parallell sekvensering (MPS, även kallat NGS). Sekvensanalysen omfattar exoner i 191 gener som inkluderas i GMS-myeloid v1.0 sekvenseringspanelen (Tabell 1). Analysen kan även innefatta regioner över utvalda SNPs som möjliggör en lågupplöst detektion av stora (>10 Mb) genomiska obalanser såsom -5 eller del(5q), -7 samt -17/del(17p).<br><p> Analysen avser somatiska detektion av varianter i samtliga 191 gener (en korresponderande hudbiopsi används som kontrollmaterial). För CEBPA undersöks även konstitutionella varianter. Vid avsaknad av kontrollmaterial undersöks endast ett begränsat antal gener enligt fördefinierade genlistor för AML (NPM1, CEBPA, FLT3), MPN (JAK2, CALR, MPL) samt KLL (TP53, NOTCH1, SF3B1). Analysen avser detektion av SNVs som förändrar aminosyrasekvensen i exon samt i regioner som påverkar splicing, små insertioner/deletioner (upp till runt 20-50 bp) samt FLT3-ITD. Som krav för godkänd sekvens krävs generellt en medeltäckning på 1000x (1000 läsningar över en position i genomet). Då kraven på godkänd sekvens uppfylls ligger metodens känslighet på en variantallelfrekvens (VAF) på ≥ 3 %. Proverna är sekvenserade på Illumina-instrument. Somatiskt detekterade varianter klassas som Tier I, II, III eller IV enligt riktlinjer för tolkning och rapportering av sekvens varianter inom cancer (Tabell 2). [1] Tier IV varianter rapporteras inte ut.</p>" }
      }
    }
  }
}
