{% extends "layout.html" %}

{% block title %}Changelog{% endblock %}
{% block style%}
  <!-- Render markdown -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@5.5.1/github-markdown.min.css">
{% endblock %}

{% block meta %}
  <meta name="description" content="Coyote3 release notes and changelog.">
{% endblock %}

{% block body %}
<div class="w-full h-full overflow-y-auto bg-gray-50">

  <!-- Header (same pattern as Contact) -->
  <header class="mx-auto max-w-7xl px-4 pt-6">
    <div class="flex flex-wrap items-start justify-between gap-4">
      <div>
        <h1 class="text-3xl font-semibold tracking-wide">Changelog</h1>
        <p class="mt-2 max-w-3xl text-base">
          Release notes for this deployment.
        </p>
      </div>

      <div class="flex items-center gap-2">
        <a href="{{ url_for('docs_bp.about') }}"
           class="inline-flex items-center gap-2 rounded-3xl border border-gray-300 bg-white px-3 py-2 text-sm font-medium shadow-xl hover:shadow-sm hover:bg-gray-50">
          <img src="{{ url_for('static', filename='icons/heroicons_outline_24/information-circle.svg') }}" alt="About" class="h-4 w-4">
          About
        </a>

        <a href="{{ url_for('dashboard_bp.dashboard') }}"
           class="inline-flex items-center gap-2 rounded-3xl border border-blue-300 bg-blue-200 px-3 py-2 text-sm font-medium shadow-xl hover:shadow-sm">
          <img src="{{ url_for('static', filename='icons/heroicons_outline_24/arrow-uturn-left.svg') }}" alt="Back" class="h-4 w-4">
          Back to Dashboard
        </a>
      </div>
    </div>
  </header>

  <!-- Content -->
  <main class="mx-auto max-w-7xl px-4 pb-16 mt-6 space-y-6">

    <!-- Main changelog card -->
    <section class="rounded-3xl border-t-4 border-blue-400 bg-white shadow-2xl p-6 hover:shadow-lg  transition duration-500">
      <div class="flex items-start justify-between gap-3">
        <div>
          <h2 class="text-sm font-semibold">Release notes</h2>
          <p class="mt-1 text-sm">
            Rendered from the Markdown changelog shipped with this deployment.
          </p>
        </div>
        <div class="text-sm text-gray-600">
          <span class="font-mono">v{{ config['APP_VERSION'] }}</span>
        </div>
      </div>

      <hr class="my-4">

      <!-- Scoped list restore (Tailwind reset often removes list bullets) -->
      <style>
        .markdown-body ul { list-style: disc !important; padding-left: 1.25rem !important; }
        .markdown-body ol { list-style: decimal !important; padding-left: 1.25rem !important; }
        .markdown-body li { margin: 0.25rem 0; }
      </style>

      <!-- GitHub markdown wrapper -->
      <article class="markdown-body"
               style="background:#ffffff; color:#24292f; color-scheme: light;">
        {{ changelog_html | safe }}
      </article>
    </section>

    <!-- Helpful links (same section type as Contact) -->
    <section class="rounded-3xl border-t-4 border-gray-400 bg-white shadow-2xl hover:shadow-lg hover:bg-gray-50 transition duration-500 p-6">
      <h2 class="text-sm font-semibold">Helpful links</h2>
      <ul class="mt-3 grid grid-cols-2 gap-2 text-sm">
        <li>
          <a class="inline-flex items-center gap-2 text-indigo-700 hover:underline"
             href="{{ url_for('docs_bp.about') }}">
            About this deployment
          </a>
        </li>
        <li>
          <a class="inline-flex items-center gap-2 text-indigo-700 hover:underline"
             href="{{ url_for('dashboard_bp.dashboard') }}">
            Dashboard
          </a>
        </li>
      </ul>
    </section>

  </main>
</div>
{% endblock %}
